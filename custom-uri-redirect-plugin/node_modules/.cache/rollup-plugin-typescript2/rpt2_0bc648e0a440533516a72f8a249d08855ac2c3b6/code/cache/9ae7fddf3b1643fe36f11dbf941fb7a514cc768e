{"code":"import { __awaiter } from \"tslib\";\nimport { Plugin } from 'obsidian';\nexport default class CustomUriRedirectPlugin extends Plugin {\n    onload() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // Log message to indicate the plugin is loading\n            console.log('Loading Custom URI Redirect Plugin');\n            // Register a Markdown post processor to handle custom URI links\n            console.log('Registering Markdown post processor');\n            this.registerMarkdownPostProcessor(this.processCustomUriLinks);\n        });\n    }\n    onunload() {\n        // Log message to indicate the plugin is unloading\n        console.log('Unloading Custom URI Redirect Plugin');\n    }\n    // Function to process custom URI links in Markdown content\n    processCustomUriLinks(el, ctx) {\n        console.log('Processing custom URI links');\n        // Find all links in the element that start with 'obsidian:'\n        const links = el.querySelectorAll('a[href^=\"obsidian:\"]');\n        console.log(`Found ${links.length} Obsidian URI links`);\n        // Iterate over each link and convert it to a URL that Notion can recognize\n        links.forEach(link => {\n            const href = link.getAttribute('href');\n            console.log(`Processing link: ${href}`);\n            if (href) {\n                // Check if it's an advanced URI or a standard Obsidian link\n                let notionUrl = '';\n                if (href.startsWith('obsidian://open')) {\n                    // Parse 'obsidian://open' URIs\n                    const params = new URLSearchParams(href.replace('obsidian://open?', ''));\n                    const vault = params.get('vault');\n                    const file = params.get('file');\n                    if (vault && file) {\n                        notionUrl = `https://jax-baiya.github.io/custom-uri-redirect-plugin/obsidian-open?vault=${encodeURIComponent(vault)}&file=${encodeURIComponent(file)}`;\n                    }\n                }\n                else if (href.startsWith('obsidian://adv-uri')) {\n                    // Parse 'obsidian://adv-uri' URIs\n                    const params = new URLSearchParams(href.replace('obsidian://adv-uri?', ''));\n                    const vault = params.get('vault');\n                    const uid = params.get('uid');\n                    const filepath = params.get('filepath');\n                    if (vault && uid && filepath) {\n                        notionUrl = `https://jax-baiya.github.io/custom-uri-redirect-plugin/obsidian-adv-uri?vault=${encodeURIComponent(vault)}&uid=${encodeURIComponent(uid)}&filepath=${encodeURIComponent(filepath)}`;\n                    }\n                }\n                // Update the link if notionUrl was constructed\n                if (notionUrl) {\n                    link.setAttribute('href', notionUrl);\n                    link.textContent = `Redirected to: ${notionUrl}`;\n                    console.log(`Converted link to: ${notionUrl}`);\n                }\n            }\n        });\n    }\n}\n","references":[]}
